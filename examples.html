<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ElmerFoamFSI: Setting up Example Problems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="IRTriangles_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ElmerFoamFSI
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">ElmerFoamFSI is fluid-solid interaction simulation application built up from OpenFOAM CFD and Elmer CSM coupled through the IMPACT multiphysics software integration infrastructure.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('examples.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Setting up Example Problems </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page will talk about how to set up example problems in <a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a> to solve fluid-structure interaction(FSI) phenomenon.</p>
<p><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a> uses a partitioned approach to solve FSI problems. OpenFoam is used as the fluid solver and Elmer is used as a structural sovler. Although <a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a> can use both weak and strong coupling approaches, only weak-coupling algoritm is implemented into ElmerFoam FSI.</p>
<p>The page is adapted from <a href="PhysicsOfCoupling.pdf" target="_blank"><b>Here</b></a> should any further reference be needed.</p>
<h1><a class="anchor" id="what_sets_what"></a>
Elmer/OpenFOAM Input - What sets what</h1>
<h2><a class="anchor" id="elmer_input"></a>
Elmer Input</h2>
<p>Elmer is an extensive open-source finite element multiphysics code. It can be used to find deformation of a solid object (U) subject to different types of loads. <a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a> uses Elmer as its structural solver. The description of a finite element problem usually starts with input files. The full description of the problem, including : geometry, materials boundaries conditions, type of equations to solve, etc. is usually provided in the input file(s).</p>
<p>The description of the geometry of the problem in Elmer is provided in a ".grd" file, and the rest of the definitions is described in a ".sif" file. If the ELMERSOLVER_STARTINFO is used, upon execution Elmer scans this file to figure out which input file should be read. Elmer uses a program called ElmerGrid to read the ".grd" file and compile the geometry description to a format useful for its internal usuage.</p>
<div class="image">
<img src="grdsample.png" alt="grdsample.png"/>
<div class="caption">
Sample .grd input file</div></div>
<p> A proper description of problem mesh requires a good level of understanding of finite element method, thus it is beyond the purpose of this page. For more information about ElmerGrid, look <a href="http://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerGridManual.pdf">here</a>.</p>
<p>The ".sif" file uses a <em>Keyword-pair</em> format to describe the rest of the problem. Each keyword can be thought of as a command to the <em>Elmer</em> solver which describes certain feature of the problem. Many of these commands require some parameters to be passed by user. There parameters are defined in front of the command after the "=" symbol. The first section of SIF file defines general settings of the problem as well as the location for geometry file, where to save simulation results, the type of simulation, time step used, etc. This definitions of this ection of the SIF file is very straight foward as shown in the following :</p>
<div class="image">
<img src="sifsample1.png" alt="sifsample1.png"/>
<div class="caption">
Sample SIF file I</div></div>
<p> In the next section, the types of equations to be solved and material properties for each constituent is described. Depending on what type of solver needed, a series of solver-related parameters should be passed to the <em>Elmer</em>. The following example defines a non-linear elasticity solver for elmer along with the type of equation solver and non-linear solution strategies that should be sued for the problem.</p>
<div class="image">
<img src="sifsample2.png" alt="sifsample2.png"/>
<div class="caption">
Sample SIF file II</div></div>
<p> The rest of SIF file defines the boundary conditions for the problem. For a structural problem different types of boundary conditions can be used, including displacement and traction. The boundary condition definition starts with a Target Boundaries(x) = y statement that specifies how many boundaries are using this description (x: an integer) and which boundary in geometry file should be used (y: separated by space if more than one). Finally we specify which direction our loads/displacement should be applied. (here 1,2,3 correspond to X, Y and Z direction). Some of the boundary conditions require special treatments that are defined by some extra keywords. For example look at the boundary condition 4 that describes a FSI boundary. In this case, we tell <em>Elmer</em> to apply a variable force to the sections of the geometry that reside on this boundary.</p>
<p>We also specify, first, which direction loads should be applied, second, they are variable in time, and third, <em>Elmer</em> should resort to function <em>LoadYDirection</em> in <em>LoadFunctionLibrary</em> whenever it is needed. Care most be practiced with the proper formating. Further definition pf the keywords can be found in <em>Elmer</em> manuals.</p>
<div class="image">
<img src="sifsample3.png" alt="sifsample3.png"/>
<div class="caption">
Sample SIF file III</div></div>
 <h2><a class="anchor" id="openfoaminput"></a>
OpenFOAM Input</h2>
<p><em>Elmerfoam</em> uses <em>openfoam</em> as its fluid solver module to solve for the fluid pressure and velocity. To capture the deformations of the solid/fluid interface,<em>OpenFOAM</em> has to also perform mesh update and re-meshing procedures in order to maintain the quality of the computational grid during the simulation (in a fluid problem, gird is equivalent to mesh for solid problems). <em>OpenFOAM</em> uses a finite-volume discretization scheme to obtain pressures and velocities and a Laplace solver to perform the re-meshing tasks. User has to specifies proper parameters for these solvers in the input files.</p>
<p>The definition of a problem in <em>OpenFOAM</em> is performed based on a multi-part input file strategy. For FSI problems, <em>OpenFOAM</em> requires both the definition of the solid and the fluid sections of the grid. In <em>ElmerFoam</em>, however, the solid definition for <em>OpenFOAM</em> is disregarded and will be replaced with that of Elmer. Similarly, all other computations for the solid section will be performed solely by Elmer. To setup a fluid problem in , we have to follow a strict folder/file hierarchy as <em>OpenFOAM</em> seeks the definition of a problem in multiple files residing in a set of subfolders. The input files in <em>OpenFOAM</em> are also called dictionary files. In each dictionary file, a set of keyword-value pairs specify proper settings for some part of the problem and solution procedure. There should be at-least three major sub-folders in the main fluid problem definition folder /fluid/. These sub-folders are first, ./fluid/0/, second,./fluid/constant/ and third,./fluid/system/. In the rest we briefly describe each folder and its contents. Readers are strongly encouraged to resort to <em>OpenFOAM</em> documentation for more details.</p>
<p>In <em>OpenFOAM</em>, /fluid/0/ contains initial and boundary conditions for the problem. In this folder, we specify initial and boundary conditions for the pressures, velocities and grid deformations in three separate files with the proper names. Similarly, ./fluid/system/ folder contains a series of input files to specify which solvers should be used and what solution strategies should be used for them. Finally, fluid/constant/ folder contains the description of the grid and material properties. In this folder, a sub-folder exists which contains all information about the problem geometry, specified in blockMeshDict. These geometric information will be read by blockMesh, an accessory of <em>OpenFOAM</em> that generates simple block-shaped grids from the geometric data defined in the dictionary. The overall structure of an example blockMesh file is as following:</p>
<div class="image">
<img src="openfoam.png" alt="openfoam.png"/>
<div class="caption">
Sample blockMesh file</div></div>
<p> After the <em>OpenFOAM</em> banner, at the top section of the file blockMesh accessory to be used and the format of the file is specified. In the <em>verticies</em> section, the coordinates for the verticies of the grid are specified (starting from 0, each line specifies a vertex coordinate). In the <em>block</em> section, the connectivity for the blocks of the mesh are specified. In the <em>patches</em> section, we sepcifiy boundaries of the domain and their connectivity with respect to the vertex indices.</p>
<h2><a class="anchor" id="elmerfoaminput"></a>
ElmerFoamFSI Input</h2>
<p>Currently, <a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a> uses a very basic input file (named "test.config"). This file should reside in the ./fluid/ folder where the <a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a> executable is called, and it should be passed to the executable as a command-line parameter. Following example shows the structure of this keyword-value pair file. In this example the name of fluid and structure solver modules that should be loaded are specified in the first two lines. The third line specifies the solution transfer module (in this case SurfX which a part of IMPACT ). In the rest of the file the total analysis time and the time step are specified.</p>
<div class="image">
<img src="elmerfoamfsi.png" alt="elmerfoamfsi.png"/>
<div class="caption">
Test.config</div></div>
<h2><a class="anchor" id="exampleproblem"></a>
Example Problems</h2>
<p>There are multiple example problems <a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a> can simulate; Simple static problem and simple dynamic problem. Here are problem-specific direction: <br/>
</p>
<p>Here are the directions for the <a class="el" href="simpledynamic.html">Simple Dynamic Problem</a>.<br/>
 Here are the directions for the <a class="el" href="simplestatic.html">Simple Static Problem</a>. <br/>
 Here are the directions for the <a class="el" href="hronturek.html">Hron-Turek Problem</a>. <br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 7 2016 15:53:04 for ElmerFoamFSI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
