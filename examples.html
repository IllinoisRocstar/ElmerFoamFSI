<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ElmerFoamFSI: Setting up Example Problems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="IRTriangles_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ElmerFoamFSI
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">ElmerFoamFSI is fluid-solid interaction simulation application built up from OpenFOAM CFD and Elmer CSM coupled through the IMPACT multiphysics software integration infrastructure.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('examples.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Setting up Example Problems </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page discusses how to set up example problems in <em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em> to solve fluid-structure interaction(FSI) phenomenon.</p>
<p><em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em> uses a partitioned approach to solve FSI problems. <em>OpenFoam</em> is used as the fluid solver and <em>Elmer</em> is used as a structural sovler. Although <em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em> can use both weak and strong coupling approaches, only weak-coupling algoritm is implemented into <em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em>.</p>
<p>This page is primarily adapted from <a href="PhysicsOfCoupling.pdf" target="_blank"><b>here</b></a>, should you require further reference.</p>
<h1><a class="anchor" id="what_sets_what"></a>
Elmer &amp; OpenFOAM Input - Setting Things Up</h1>
<h2><a class="anchor" id="elmer_input"></a>
Elmer Input</h2>
<p><em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em> uses <em>Elmer</em> as its structural solver; <em>Elmer</em> is an extensive, open-source, finite element multiphysics code which can be used to find deformation of a solid object, (U), subject to different types of loads. The full description of a finite element problem, including the geometry, materials boundary conditions, types of equations to solve, etc., is typically provided within the input file(s).</p>
<p>The description of the geometry of a finite element problem in <em>Elmer</em> is provided in a ".grd" file with the rest of the necessary definitions described in a ".sif" file. If the <b>ELMERSOLVER_STARTINFO</b> is used, upon execution <em>Elmer</em> will scan this file to figure out which input file should be read. <em>Elmer</em> uses a program called <em>ElmerGrid</em> to read the ".grd" file and compile the geometry description to a format useful for its internal usuage.</p>
<div class="image">
<img src="grdsample.png" alt="grdsample.png"/>
<div class="caption">
Sample .grd input file</div></div>
<p> A proper description of the problem mesh requires a good level of understanding of finite element method, which is beyond the purpose of this page. For more information about <em>ElmerGrid</em> and finite element methods, visit <a href="http://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerGridManual.pdf">this document</a>.</p>
<p>The ".sif" file uses a <em>keyword-pair</em> format to describe the rest of the problem outside of the description. Each keyword can be thought of as a command to the <em>Elmer</em> solver which describes one particular feature of the problem. Many of these commands require parameters to be passed by user; these parameters are defined in front of the command after the "=" symbol. The first section of SIF file defines general settings of the problem as well as the location for geometry file, where to save simulation results, the type of simulation, time step used, etc. The definitions within this section of the SIF file are very straight-foward, as shown in the following file capture:</p>
<div class="image">
<img src="sifsample1.png" alt="sifsample1.png"/>
<div class="caption">
Sample SIF file I</div></div>
<p> In the next section, the types of equations to be solved and the material properties for each constituent are described. Depending on the type of solver needed, a series of solver-related parameters should be passed to <em>Elmer</em>. The following example defines a non-linear elasticity solver for <em>Elmer</em>, along with the type of equation solver and non-linear solution strategies that should be utilized in solving the problem.</p>
<div class="image">
<img src="sifsample2.png" alt="sifsample2.png"/>
<div class="caption">
Sample SIF file II</div></div>
<p> The remainder of the SIF file defines the boundary conditions of the problem. For a structural problem, different types of boundary conditions can be used including conditions for displacement and traction. Boundary condition definition starts with a <b>Target Boundaries(x) = y</b> statement, where x is an integer and y values are separated by space (if more than one is provided), that specifies how many boundaries are using this description and which boundary within the geometry file should be used. Finally, we specify which direction our loads/displacement should be applied (here 1, 2, and 3 correspond to X, Y, and Z directions). Some boundary conditions require special treatments that are defined by additional keywords. For example, boundary condition 4 within the Sample SIF file III figure describes an FSI boundary. In this case, we tell <em>Elmer</em> to apply a variable force to the sections of the geometry that reside on this boundary.</p>
<p>We must also specify, (1) which direction loads should be applied, (2) whether these loads are variable in time, and (3) if <em>Elmer</em> should resort to function <em>LoadYDirection</em> in <em>LoadFunctionLibrary</em> when it is needed. Special attention must be paid to proper formating; further definition of and information about the keywords can be found within the <a href="http://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerGridManual.pdf"><em>Elmer</em> manuals</a>.</p>
<div class="image">
<img src="sifsample3.png" alt="sifsample3.png"/>
<div class="caption">
Sample SIF file III</div></div>
 <h2><a class="anchor" id="openfoaminput"></a>
OpenFOAM Input</h2>
<p><em>Elmerfoam</em> uses <em>OpenFOAM</em> as its fluid solver module to solve for fluid pressure and velocity. To properly capture deformations in the solid/fluid interface, <em>OpenFOAM</em> must also perform mesh update and re-meshing procedures to maintain the quality of the computational grid during the simulation (in a fluid problem, the grid is equivalent to a mesh for solid problems). <em>OpenFOAM</em> uses a finite-volume discretization scheme to obtain pressures and velocities and a Laplace solver to perform the re-meshing tasks. The user must specify proper parameters for these solvers in the input files.</p>
<p>The definition of a problem in <em>OpenFOAM</em> is performed via multi-part input file strategy. For FSI problems, <em>OpenFOAM</em> requires both the definition of the solid and the fluid sections of the grid. In <em>ElmerFoam</em>, however, the solid definition for <em>OpenFOAM</em> is disregarded and is replaced with the definition from <em>Elmer</em>. Similarly, all other computations for the solid section are performed solely by <em>Elmer</em>. To setup a fluid problem in , we must follow a strict folder/file hierarchy because <em>OpenFOAM</em> searches for the definition of a problem within multiple files, all of which reside in a set of subfolders. The input files in <em>OpenFOAM</em> are also referred to as <em>dictionary files</em>. In each dictionary file, a set of keyword-value pairs specify proper settings for part of the problem and solution procedure. There should be at-least three major sub-folders within the main fluid problem definition folder, <b>/fluid/</b>. These sub-folders are first, <b>./fluid/0/</b>, second, <b>./fluid/constant/</b>, and third, <b>./fluid/system/</b>. We will briefly describe each folder and its contents; readers are strongly encouraged to resort to <em>OpenFOAM</em>'s documentation for more details.</p>
<ul>
<li>In <em>OpenFOAM</em>, the <b>./fluid/0/</b> folder contains initial and boundary conditions for the problem. In this folder, we specify initial and boundary conditions for the pressures, velocities and grid deformations in three separate files with the proper names</li>
<li>Similarly, the <b>./fluid/system/</b> folder contains a series of input files to specify which solvers should be used and what solution strategies should be used for each</li>
<li>Finally, the <b>./fluid/constant/</b> folder contains the description of the grid and material properties. In this folder, a sub-folder exists which contains all information about the problem geometry, specified within <em>blockMeshDict</em>. The geometric information will be read by <em>blockMesh</em>, an accessory of <em>OpenFOAM</em>, that generates simple block-shaped grids from the geometric data defined in the dictionary <br/>
 The overall structure of an example <em>blockMesh</em> file is as following:</li>
</ul>
<div class="image">
<img src="openfoam.png" alt="openfoam.png"/>
<div class="caption">
Sample blockMesh file</div></div>
<ul>
<li>Below the <em>OpenFOAM</em> banner, the top section lists the <em>blockMesh</em> accessory file to be used and the format of the file</li>
<li>In the <em>verticies</em> section, the coordinates for the verticies of the grid are specified (starting from 0, each line specifies a vertex coordinate)</li>
<li>In the <em>block</em> section, the connectivity for the blocks of the mesh are specified</li>
<li>In the <em>patches</em> section, the boundaries of the domain and their connectivity with respect to the vertex indices are specified</li>
</ul>
<h2><a class="anchor" id="elmerfoaminput"></a>
ElmerFoamFSI Input</h2>
<p>Currently, <em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em> uses a very basic input file (named <b>test.config</b>). This file should reside in the <b>./fluid/</b> folder where the <em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em> executable is called, and should be passed to the executable as a command-line parameter. The following example shows the structure of this keyword-value pair file; in this example, the name of fluid and structure solver modules are specified in the first two lines. The third line specifies the solution transfer module (in this case, <em>SurfX</em>, which is a part of <em>IMPACT</em>). The rest of the file describes the total analysis time and the time step.</p>
<div class="image">
<img src="elmerfoamfsi.png" alt="elmerfoamfsi.png"/>
<div class="caption">
Test.config</div></div>
<h2><a class="anchor" id="exampleproblem"></a>
Example Problems</h2>
<p>There are multiple example problems <em><a class="el" href="namespaceElmerFoamFSI.html" title="Project-specific namespace. ">ElmerFoamFSI</a></em> can simulate, grouped into two broad categories: simple static problems and simple dynamic problems. <br/>
Problem-specific directions are found through the following links: <br/>
</p>
<p>Here are the directions for the <a class="el" href="simpledynamic.html">Simple Dynamic Problem</a>.<br/>
Here are the directions for the <a class="el" href="simplestatic.html">Simple Static Problem</a>. <br/>
Here are the directions for the <a class="el" href="hronturek.html">Hron-Turek Problem</a>. <br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jul 25 2016 15:50:54 for ElmerFoamFSI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
