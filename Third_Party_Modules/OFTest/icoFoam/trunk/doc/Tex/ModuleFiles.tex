\irsection{Obtaining, placing, and editing the module files}{ModuleFiles}

For a user internal to Illinois Rocstar the files necessary for building a module for \icofoam\, within \openfoamex\, can be found in the source repository under \irfilename{/MPInfra/Third\_Party\_ Modules/OFTest/icoFoam/trunk/}. For an external user these files may be found on the open multiphysics website (to come). The files will contain the appropriate directory structure for building the driver. However, the files used with \openfoam\, to create a module library must be placed in the appropriate locations within the \openfoam\, source files in order for them to build. These files are located under the \irfilename{native} directory of the module main source directory. The locations for placing these files will be given, but it should be noted that these are specific for \openfoamex\, \software{3.1}. In the case of another version of \openfoamex\, it may be necessary to place these files in different locations. If you are using a different version of \openfoamex\,, it is suggested that you locate the source file \irfilename{icoFoam.C} and then place the module files in a manner with a similar structure to that shown here. 

All paths below are shown from within the \openfoamex\, main source directory.

\begin{itemize}
\item The main source file \irfilename{icoFoam.C} should be located under \newline \irfilename{applications/solvers/incompressible/icoFoam/}.
\item Place \irfilename{icoFoamHeader.H} and \irfilename{icoFoamModule.C} in \newline \irfilename{applications/solvers/incompressible/icoFoam/}.
\item Replace the \irfilename{files} and \irfilename{options} files located under \newline \irfilename{applications/solvers/incompressible/icoFoam/Make} with the \irfilename{files} and \irfilename{options} files provided with the module. (The \irfilename{options} file will require editing.)
\item Place the \irfilename{Allwmake} file in \irfilename{applications/solvers/incompressible/}.
\end{itemize}

It is necessary to edit the \irfilename{options} file in the \irfilename{Make} directory as mentioned above. The \irfilename{options} file should appear as shown below

\begin{mdframed}[]
\begin{verbatim}
EXE_INC = \
    -I$(LIB_SRC)/finiteVolume/lnInclude \
    -I/path/to/IMPACT/install/include

LIB_LIBS = \
    -lfiniteVolume \
    -llduSolvers \
    -L/path/to/IMPACT/install/lib \
    -lSITCOM
\end{verbatim}
\end{mdframed}

Edit the locations that say ``\texttt{path/to/IMPACT/install/}'' to be the actual path to your installation of \software{IMPACT}. Again, note that if you did not do \irfilename{make install} when compiling and building \impact\, the path to the include directory should be the source directory for \impact, and the path to the \irfilename{lib} directory should be the build directory for \impact.

The module files are now in place and have been edited, so the module library can be built.

